<div class="reciters-list">
  <div class="reciters-list__search">
    <nz-input-group [nzPrefix]="searchIconTpl">
      <input
        nz-input
        type="text"
        [placeholder]="'RECITERS.LIST.SEARCH_PLACEHOLDER' | translate"
        [ngModel]="searchQuery()"
        (ngModelChange)="onSearchInput($event)"
      />
    </nz-input-group>
    <ng-template #searchIconTpl>
      <i class="bx bx-search reciters-list__search-icon"></i>
    </ng-template>
  </div>

  <nz-table
    #recitersTable
    [nzData]="reciters()"
    [nzLoading]="loading()"
    [nzTotal]="total()"
    [nzPageIndex]="pageIndex()"
    [nzPageSize]="pageSize()"
    [nzFrontPagination]="false"
    [nzShowSizeChanger]="true"
    [nzPageSizeOptions]="[5, 10, 20]"
    nzSize="middle"
    [nzNoResult]="emptyTpl"
    (nzPageIndexChange)="onPageChange($event)"
    (nzPageSizeChange)="onPageSizeChange($event)"
  >
    <thead>
      <tr>
        <th
          nzColumnKey="name_ar"
          [nzSortFn]="true"
          [nzSortOrder]="sortField() === 'name_ar' ? sortOrder() : null"
          (nzSortOrderChange)="onSortChange('name_ar', $event)"
        >
          {{ 'RECITERS.LIST.COLUMNS.NAME_AR' | translate }}
        </th>
        <th
          nzColumnKey="name_en"
          [nzSortFn]="true"
          [nzSortOrder]="sortField() === 'name_en' ? sortOrder() : null"
          (nzSortOrderChange)="onSortChange('name_en', $event)"
        >
          {{ 'RECITERS.LIST.COLUMNS.NAME_EN' | translate }}
        </th>
        <th
          nzColumnKey="nationality"
          [nzSortFn]="true"
          [nzSortOrder]="sortField() === 'nationality' ? sortOrder() : null"
          (nzSortOrderChange)="onSortChange('nationality', $event)"
        >
          {{ 'RECITERS.LIST.COLUMNS.NATIONALITY' | translate }}
        </th>
        <th>{{ 'RECITERS.LIST.COLUMNS.DATE_OF_BIRTH' | translate }}</th>
        <th>{{ 'RECITERS.LIST.COLUMNS.DATE_OF_DEATH' | translate }}</th>
        <th>{{ 'RECITERS.LIST.COLUMNS.IDENTIFIER' | translate }}</th>
      </tr>
    </thead>
    <tbody>
      @for (reciter of recitersTable.data; track reciter.id) {
        <tr>
          <td class="reciters-list__name-ar">{{ reciter.name_ar }}</td>
          <td>{{ reciter.name_en }}</td>
          <td>
            <nz-tag nzColor="blue">{{ reciter.nationality }}</nz-tag>
          </td>
          <td>{{ reciter.date_of_birth || '—' }}</td>
          <td>{{ reciter.date_of_death || '—' }}</td>
          <td>
            <code class="reciters-list__identifier">{{ reciter.identifier }}</code>
          </td>
        </tr>
      }
    </tbody>
  </nz-table>
</div>

<ng-template #emptyTpl>
  <div class="reciters-list__empty">
    <i class="bx bx-user-voice reciters-list__empty-icon"></i>
    @if (searchQuery()) {
      <p>{{ 'RECITERS.LIST.NO_SEARCH_RESULTS' | translate }}</p>
    } @else {
      <p>{{ 'RECITERS.LIST.EMPTY' | translate }}</p>
    }
  </div>
</ng-template>
